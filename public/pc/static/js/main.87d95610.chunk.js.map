{"version":3,"sources":["paths/SearchList/SearchList.jsx","components/SearchButton/SearchButton.jsx","components/List/List.jsx","components/Video/Video.jsx","paths/Movie/Movie.jsx","paths/Tv/Tv.jsx","paths/Animation/Animation.jsx","components/VideoPlayer/EpisodeButton/EpisodeButton.jsx","components/VideoPlayer/NextEpisode/NextEpisode.jsx","components/VideoPlayer/VjsMsg/VjsMsg.jsx","components/VideoPlayer/VideoPlayer.jsx","components/ButtonSE/ButtonSE.jsx","utils/download.js","components/DownLoadList/DownLoadList.jsx","paths/PlayPage/PlayPage.jsx","paths/File/CreateDir/CreateDir.jsx","components/Upload/Upload.jsx","components/MessageBox/MessageBox.jsx","paths/File/File.jsx","paths/Recycle/Recycle.jsx","App.js","index.js","allTags.js"],"names":["SearchList","state","videoList","changeList","_","setState","intoPlayer","content","id","_id","bundleSize","type","props","history","push","pubsub","subscribe","this","unsubscribe","typesCN","className","length","map","onClick","bundleName","Component","withRouter","SearchButton","pressEnter","event","keyCode","search","value","inputNode","blur","axios","get","then","res","publish","data","placeholder","onKeyDown","ref","node","List","page","limit","contentlist","noMoreData","getNextVideoList","tag","pageGot","getVideoList","listScroll","target","scrollTop","offsetHeight","bottomHeight","scrollHeight","coverImgFail","src","index","lastIndexOf","ext","slice","console","log","onScroll","listWraperNode","onError","alt","title","Video","activeIndex","clickTab","tags","tagsCN","allTags","require","Movie","movieTags","movieTagsCN","unshift","Tv","tvTags","tvTagsCN","Animation","animationTags","animationTagsCN","EpisodeButton","isShow","e","sete_inline","startep_local","i","body","startep","s","toggleList","newisShow","chapters","onMouseEnter","onMouseLeave","style","display","vjsComponent","videojs","getComponent","vjsEpisodeButton","player","options","mount","bind","ready","on","ReactDOM","unmountComponentAtNode","el","render","registerComponent","NextEpisode","nextep","width","height","viewBox","points","fill","x1","y1","x2","y2","stroke","strokeWidth","vjsNextEpisode","VjsMsg","msgShow","msg","vjsMsg","vcount","vmark","interval","setInterval","clearInterval","nextState","VideoPlayer","create_allplaylist","allplaylist","videoInfo","Object","keys","forEach","key","list","item","sources","playlist","currentItem","maxe","addSubs","currentsubs","addRemoteTextTrack","default","label","mode","togglePlay","paused","play","pause","handlescroll","isFullscreen","operator","nativeEvent","deltaY","changevolume","newvolume","volume","vjsMsgNode","parseInt","hotkeypress","hotkey","exitFullscreen","requestFullscreen","newtime","currentTime","that","videoNode","autoplay","controls","fluid","preLoad","autoadvance","settings","textTrackSettings","setValues","updateDisplay","focus","getChild","addChild","dispose","data-vjs-player","onWheel","ButtonSE","s_swift","sete","create_s_e","seasonCN","partCN","s_name","s_e","bundleKeys","changeSeason","changeEpisode","index1","index2","createEpisode","season","ep","name","createAndDownloadFile","fileName","downUrl","method","url","responseType","headers","blob","Blob","downa","document","createElement","href","window","URL","createObjectURL","download","appendChild","click","removeChild","revokeObjectURL","catch","error","DownLoadList","PlayPage","location","Create","name_duplication","keyDown","sure","trim","createNewDir","cancel","cancelNewDir","currentList","findIndex","onBlur","Upload","percent","filename","upload","dir","formData","FormData","append","fileNode","files","onUploadProgress","progressEvent","lengthComputable","loaded","total","intoDir","fakeClick","fileChange","onChange","toggleUpload","MessageBox","File","showCreateDir","showUpload","showMsg","currentDirs","currentFiles","file","chosen","handleKeyDown","ctrlDown","shiftDown","preventDefault","chosenList","moveList","fromdir","ids","newdir","post","showMessage","altDown","gotoPrevDir","handleKeyUp","stopPropagation","handleMouseDown","handleWarperClick","unselectChosen","handleItemkeyDown","current","handleItemDbclick","modelName","dirName","stack","stackName","len","pop","handleItemClik","toggleItem","splice","firstIndex","lastIndex","tempIndex","newcurrentList","fileDownLoad","showNewDir","timer","setTimeout","clearTimeout","gotoDir","documentElement","addEventListener","removeEventListener","onDoubleClick","tabIndex","Recycle","recoverChosen","recoverOne","recoverAll","clearChosen","clearAll","readyList","app","activeClassName","to","path","component","getElementById","Action","Fiction","Love","Fantasy","Comedy","Horror","Adventure","Disaster","Realistic","Samurai","West","exports"],"mappings":"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","file":"static/js/main.87d95610.chunk.js","sourcesContent":["import React, { Component } from 'react'\r\nimport {withRouter} from \"react-router-dom\"\r\nimport pubsub from \"pubsub-js\"\r\nimport \"./SearchList.css\"\r\n\r\nclass SearchList extends Component {\r\n    state={\r\n        videoList:[]\r\n    }\r\n    changeList=(_,videoList)=>{\r\n        this.setState({videoList})\r\n    }\r\n    intoPlayer=(content)=>{\r\n        const {_id:id, bundleSize, type}=content\r\n        this.props.history.push(\"/playpage\",{id,type,bundleSize})\r\n    }\r\n    componentDidMount(){\r\n        pubsub.subscribe(\"changeList\",this.changeList)\r\n    }\r\n    componentWillUnmount(){\r\n        pubsub.unsubscribe(\"changeList\")\r\n    }\r\n    render() {\r\n        const {videoList}=this.state\r\n        let typesCN={\r\n            \"Movies\":\"电影\",\r\n            \"Animations\":\"动漫\",\r\n            \"Tvs\":\"电视剧\",\r\n        }\r\n        return (\r\n            <ul className=\"search_list\" >\r\n                {\r\n                    videoList.length===0 ? \r\n                    (<p className=\"search_list_none\">没有相关信息</p>):\r\n                    videoList.map(content=>{\r\n                        return(\r\n                            <li className=\"search_list_item\" onClick={()=>{this.intoPlayer(content)}} key={content._id}>\r\n                                <span className=\"search_result_name\">\r\n                                    {content.bundleName}\r\n                                </span>\r\n                                <span className=\"search_result_type\">\r\n                                    {typesCN[content.type]}\r\n                                </span>\r\n                            </li>\r\n                        )\r\n                    })\r\n                    \r\n                }\r\n\r\n            </ul>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withRouter(SearchList)\r\n","import React, { Component } from 'react'\r\nimport axios from \"axios\"\r\nimport pubsub from \"pubsub-js\"\r\nimport {withRouter} from \"react-router-dom\"\r\nimport \"./SearchButton.css\"\r\n\r\n\r\nclass SearchButton extends Component {\r\n    pressEnter=(event)=>{\r\n        if(event.keyCode===13) {\r\n            this.search()\r\n        }\r\n    }\r\n    search=()=>{\r\n        const {value}=this.inputNode;\r\n        this.inputNode.blur()\r\n        axios.get(`/video/search?keywords=${value}`).then(res=>{\r\n            this.props.history.push(\"/search\")\r\n            pubsub.publish(\"changeList\",res.data)\r\n        })\r\n    }\r\n    render() {\r\n        return (\r\n            <div className=\"searchButton\">\r\n                <div className=\"searchButton_outer\">\r\n                    <input className=\"searchButton_input\" placeholder=\"输入内容进行搜索\" onKeyDown={this.pressEnter} ref={node=>this.inputNode=node} />\r\n                    <span className=\"searchButton_icon\" onClick={this.search}></span>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withRouter(SearchButton)","import React, { Component } from 'react'\r\nimport axios from \"axios\"\r\nimport pubsub from \"pubsub-js\"\r\nimport {withRouter} from \"react-router-dom\"\r\nimport \"./List.css\"\r\n\r\nclass List extends Component {\r\n    state={\r\n        page:1,\r\n        limit:30,\r\n        contentlist:[],\r\n        noMoreData:false,\r\n    }\r\n    componentDidMount(){\r\n        pubsub.subscribe(\"getVideoList\",this.getVideoList)\r\n    }\r\n    componentWillUnmount(){\r\n        pubsub.unsubscribe(\"getVideoList\")\r\n    }\r\n    getNextVideoList=()=>{\r\n        const {type, tag}=this\r\n        const {page, limit}=this.state\r\n        if(page>this.pageGot){\r\n            this.pageGot=this.pageGot+1\r\n            axios.get(`/video/list?type=${type}&tag=${tag}&page=${page}&limit=${limit}`).then(res=>{\r\n                let {contentlist, page}=this.state\r\n                if(res.data.length>0){\r\n                    this.setState({contentlist:[...contentlist,...res.data],page:page+1})\r\n                }else{\r\n                    this.setState({noMoreData:true})\r\n                }\r\n            })\r\n        }\r\n        \r\n    }\r\n    getVideoList=(_,{type, tag})=>{\r\n        const {limit}=this.state\r\n        this.type=type\r\n        this.tag=tag\r\n        this.pageGot=1\r\n        axios.get(`/video/list?type=${type}&tag=${tag}&page=${1}&limit=${limit}`).then(res=>{\r\n            if(res.data.length>0){\r\n                this.setState({contentlist:res.data,page:2})\r\n            }else{\r\n                this.setState({noMoreData:true})\r\n            }\r\n        })\r\n        \r\n    }\r\n    listScroll=(event)=>{\r\n        let { scrollTop, offsetHeight, scrollHeight }=event.target//this.listWraperNode//\r\n        let bottomHeight=scrollHeight-offsetHeight-scrollTop\r\n        if(!this.state.noMoreData && bottomHeight<500){\r\n            this.getNextVideoList()\r\n        }\r\n    }\r\n    intoPlayer=(content)=>{\r\n        const {_id:id, bundleName, bundleSize, type}=content\r\n        this.props.history.push(\"/playpage\",{id, bundleName,type,bundleSize})\r\n    }\r\n    coverImgFail=(event)=>{\r\n        let src=event.target.src\r\n        const index=src.lastIndexOf(\".\")\r\n        const ext=src.slice(index+1,)\r\n        console.log(ext);\r\n        if(ext===\"webp\"){\r\n            event.target.src=src.slice(0,index+1)+\"jpg\"\r\n        }else if(ext===\"jpg\"){\r\n            event.target.src=src.slice(0,index+1)+\"png\"\r\n        }else{\r\n            event.target.src=\"/imgs/defaultCover.jpg\"\r\n        }\r\n    }\r\n    render() {\r\n        const {contentlist}=this.state\r\n        return (\r\n            <div className=\"listWraper\" onScroll={this.listScroll} ref={listWraperNode=>this.listWraperNode=listWraperNode}>\r\n                <ul className=\"list\" >\r\n                    {\r\n                        contentlist.map(content=>{\r\n                            return(\r\n                                <li className=\"list_item\" onClick={()=>{this.intoPlayer(content)}} key={content._id}>\r\n                                    <img className=\"coverImg\" src={`/imgs/${content.type}/${content.bundleName}.webp`} onError={this.coverImgFail} alt=\"\" />\r\n                                    <p title={content.bundleName} className=\"ellipsis videoName\">{content.bundleName}</p>\r\n                                </li>\r\n                            )\r\n                        })\r\n                        \r\n                    }\r\n\r\n                </ul>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withRouter(List)\r\n","import React, { Component } from 'react'\r\nimport pubsub from \"pubsub-js\"\r\nimport List from '../../components/List/List';\r\nimport \"./Video.css\"\r\n\r\n\r\nexport default class Video extends Component {\r\n    state={\r\n        activeIndex:0,//哪个tag需要被高亮\r\n    }\r\n    componentDidMount(){\r\n        const {type ,tags}=this.props\r\n        pubsub.publish(\"getVideoList\",{type,tag:tags[0]})\r\n    }\r\n    clickTab=(index)=>{\r\n        this.setState({activeIndex:index})\r\n        const {type ,tags}=this.props\r\n        pubsub.publish(\"getVideoList\",{type,tag:tags[index]})\r\n    }\r\n    render() {\r\n        const {activeIndex}=this.state\r\n        const {type ,tags, tagsCN}=this.props\r\n        return (\r\n            <div className=\"videoWraper\">\r\n                <div className=\"tagNav\">\r\n                    {\r\n                        tags.map((tag, index) => {\r\n                            return (\r\n                                <span\r\n                                key={index} \r\n                                onClick={() => { this.clickTab(index) }} \r\n                                className={index === activeIndex ? \"tag tagOn\" : \"tag\"} \r\n                                >\r\n                                    {tagsCN[tag]}\r\n                                </span>)\r\n                        })\r\n                    }\r\n                </div>\r\n                <div className=\"videoMain\">\r\n                    <List tag={tags[activeIndex]} type={type} />\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from 'react'\r\nimport Video from '../../components/Video/Video'\r\n// import \"./Movie.css\"\r\nlet  allTags =require(\"../../allTags\")\r\n\r\nexport default class Movie extends Component {\r\n    render() {\r\n        const {movieTags, movieTagsCN}=allTags\r\n        if(movieTags[0]!==\"All\"){\r\n            movieTags.unshift(\"All\")\r\n            movieTagsCN[\"All\"]=\"全部\"\r\n        }\r\n        const type=\"Movies\"\r\n        return (\r\n            <Video type={type} tags={movieTags} tagsCN={movieTagsCN} />\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from 'react'\r\nimport Video from '../../components/Video/Video'\r\nlet  allTags =require(\"../../allTags\")\r\n\r\nexport default class Tv extends Component {\r\n    render() {\r\n        const {tvTags, tvTagsCN}=allTags\r\n        if(tvTags[0]!==\"All\"){\r\n            tvTags.unshift(\"All\")\r\n            tvTagsCN[\"All\"]=\"全部\"\r\n        }\r\n        const type=\"Tvs\"\r\n        return (\r\n            <Video type={type} tags={tvTags} tagsCN={tvTagsCN} />\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from 'react'\r\nimport Video from '../../components/Video/Video'\r\n// import \"./Animation.css\"\r\nlet  allTags =require(\"../../allTags\")\r\n\r\nexport default class Animation extends Component {\r\n    render() {\r\n        const {animationTags, animationTagsCN}=allTags\r\n        if(animationTags[0]!==\"All\"){\r\n            animationTags.unshift(\"All\")\r\n            animationTagsCN[\"All\"]=\"全部\"\r\n        }\r\n        const type=\"Animations\"\r\n        return (\r\n            <Video type={type} tags={animationTags} tagsCN={animationTagsCN} />\r\n        )\r\n    }\r\n}","/**\r\n * EpisodeList.js\r\n *\r\n * This is just a plain ol' React component.\r\n * the vjsComponent methods, player methods etc. are available via\r\n * the vjsComponent prop (`this.props.vjsComponent`)\r\n */\r\nimport React, { Component,  } from 'react';//PropTypes\r\nimport ReactDOM from 'react-dom';\r\nimport videojs from 'video.js';\r\nimport pubsub from \"pubsub-js\"\r\nimport \"./EpisodeButton.css\"\r\n\r\nclass EpisodeButton extends Component {\r\n    state={\r\n        isShow:false,\r\n        e:1,\r\n    }\r\n    sete_inline=(_,e)=>{\r\n        this.setState({e})\r\n    }\r\n    startep_local=(i)=>{\r\n        const { startep, s } = this.props.body\r\n        startep(null,{s,e:i+1})\r\n        this.setState({isShow:false, e:i+1})\r\n    }\r\n    toggleList=(newisShow)=>{\r\n        if(newisShow===\"auto\"){\r\n            this.setState({isShow:!this.state.isShow})\r\n        }else{\r\n            this.setState({isShow:newisShow})\r\n        }\r\n    }\r\n    componentDidMount(){\r\n        pubsub.subscribe(\"sete_inline\",this.sete_inline)\r\n    }\r\n    componentWillUnmount(){\r\n        pubsub.unsubscribe(\"sete_inline\")\r\n    }\r\n    render() {\r\n        const { bundleSize, s } = this.props.body\r\n        let chapters = []\r\n        for (let i = 0; i < bundleSize[\"season_\" + s]; i++) {\r\n            chapters.push(\r\n                <li className={this.state.e===(i+1) ? \"epLi epLi_active\" : \"epLi\"} onClick={()=>this.startep_local(i)} key={i}>{i<9 ? \"0\"+(i+1) : (i+1)}</li>\r\n            )\r\n        }\r\n        return (\r\n\r\n            <div \r\n            className=\"epList\" \r\n            onMouseEnter={()=>{this.toggleList(true)}} \r\n            onMouseLeave={()=>{this.toggleList(false)}} \r\n            >\r\n                <button className=\"epMenu\" onClick={()=>{this.toggleList(\"auto\")}} >列表</button>\r\n                <div className=\"epUlWarper\" style={{display: this.state.isShow ? \"block\" : \"none\"}} >\r\n                    <ul className=\"epUl\">{chapters}</ul>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * vjsEpisodeList.js\r\n * Here is where we register a Video JS Component and\r\n * mount the React component to it when the player is ready.\r\n */\r\n//  import EpisodeList from './EpisodeList';\r\n\r\n\r\nconst vjsComponent = videojs.getComponent('Component');\r\n\r\nclass vjsEpisodeButton extends vjsComponent {\r\n\r\n    constructor(player, options) {\r\n        super(player, options);\r\n        this.data = options;\r\n        /* Bind the current class context to the mount method */\r\n        this.mount = this.mount.bind(this);\r\n\r\n        /* When player is ready, call method to mount React component */\r\n        player.ready(() => {\r\n            this.mount();\r\n        });\r\n\r\n        /* Remove React root when component is destroyed */\r\n        this.on(\"dispose\", () => {\r\n            ReactDOM.unmountComponentAtNode(this.el())\r\n        });\r\n    }\r\n\r\n    /**\r\n     * We will render out the React EpisodeList component into the DOM element\r\n     * generated automatically by the VideoJS createEl() method.\r\n     *\r\n     * We fetch that generated element using `this.el()`, a method provided by the\r\n     * vjsComponent class that this class is extending.\r\n     */\r\n    mount() {\r\n        ReactDOM.render(<EpisodeButton vjsComponent={this} body={this.data} />, this.el());\r\n    }\r\n}\r\n\r\n/**\r\n * Make sure to register the vjsComponent so Video JS knows it exists\r\n */\r\nvjsComponent.registerComponent('vjsEpisodeButton', vjsEpisodeButton);\r\n\r\nexport default vjsEpisodeButton;\r\n","/**\r\n * EpisodeList.js\r\n *\r\n * This is just a plain ol' React component.\r\n * the vjsComponent methods, player methods etc. are available via\r\n * the vjsComponent prop (`this.props.vjsComponent`)\r\n */\r\nimport React, { Component,  } from 'react';//PropTypes\r\nimport ReactDOM from 'react-dom';\r\nimport videojs from 'video.js';\r\nimport \"./NextEpisode.css\"\r\n\r\nclass NextEpisode extends Component {\r\n    render() {\r\n        // console.log(this.props.body.nextep);\r\n        return (\r\n            <div className=\"nextepisode\" onClick={this.props.body.nextep}>\r\n                <svg width=\"100%\" height=\"100%\" viewBox=\"0 0 99 99\">\r\n                    <polyline points=\"33 33 64 49.5 33 66\" fill=\"white\" />\r\n                    <line x1=\"66\" y1=\"33\" x2=\"66\" y2=\"66\" stroke=\"white\" strokeWidth=\"4\" />\r\n                </svg>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * vjsEpisodeList.js\r\n * Here is where we register a Video JS Component and\r\n * mount the React component to it when the player is ready.\r\n */\r\n//  import EpisodeList from './EpisodeList';\r\n\r\n\r\nconst vjsComponent = videojs.getComponent('Component');\r\n\r\nclass vjsNextEpisode extends vjsComponent {\r\n\r\n    constructor(player, options) {\r\n        super(player, options);\r\n        /* Bind the current class context to the mount method */\r\n        this.mount = this.mount.bind(this);\r\n        this.data = options\r\n        /* When player is ready, call method to mount React component */\r\n        player.ready(() => {\r\n            this.mount();\r\n        });\r\n\r\n        /* Remove React root when component is destroyed */\r\n        this.on(\"dispose\", () => {\r\n            ReactDOM.unmountComponentAtNode(this.el())\r\n        });\r\n    }\r\n\r\n    /**\r\n     * We will render out the React EpisodeList component into the DOM element\r\n     * generated automatically by the VideoJS createEl() method.\r\n     *\r\n     * We fetch that generated element using `this.el()`, a method provided by the\r\n     * vjsComponent class that this class is extending.\r\n     */\r\n    mount() {\r\n        ReactDOM.render(<NextEpisode vjsComponent={this} body={this.data} />, this.el());\r\n    }\r\n}\r\n\r\n/**\r\n * Make sure to register the vjsComponent so Video JS knows it exists\r\n */\r\nvjsComponent.registerComponent('vjsNextEpisode', vjsNextEpisode);\r\n\r\nexport default vjsNextEpisode;\r\n","import React, { Component } from 'react'\r\nimport \"./VjsMsg.css\"\r\n\r\nexport default class VjsMsg extends Component {\r\n    state={\r\n        msgShow:false,\r\n        msg:\"\",\r\n    }\r\n    vjsMsg=(msg)=>{\r\n        if(!this.vcount){\r\n            console.log(this.vcount);\r\n            this.vcount=1\r\n            this.vmark=1\r\n            this.setState({msgShow:true,msg})\r\n            this.interval=setInterval(()=>{\r\n                if(this.vmark===this.vcount){\r\n                    clearInterval(this.interval)\r\n                    this.setState({msg:\"\",msgShow:false})\r\n                    console.log(\"clear\");\r\n                    this.vcount=0\r\n                }else{\r\n                    this.vmark=this.vcount\r\n                }\r\n            },500)\r\n        }else{\r\n            console.log(\"update\");\r\n            this.vcount++\r\n            this.setState({msgShow:true,msg})\r\n        }\r\n    }\r\n    shouldComponentUpdate(_, nextState){//nextProps\r\n        const {msg, msgShow} = this.state\r\n        if(nextState.msgShow!==msgShow || nextState.msg!==msg){\r\n            return true\r\n        }else{\r\n            return false\r\n        }\r\n    }\r\n    render() {\r\n        const {msgShow, msg}=this.state\r\n        return (\r\n            <div className=\"vjsMsg\" style={{display:msgShow ? \"block\" : \"none\"}}>\r\n                {msg}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from 'react'\r\nimport videojs from 'video.js'\r\nimport 'video.js/dist/video-js.css'\r\nimport \"./VideoPlayer.css\"\r\nimport \"videojs-playlist/dist/videojs-playlist.es\"\r\nimport pubsub from \"pubsub-js\"\r\n// // eslint-disable-next-line\r\n// import vjsEpisodeList from \"./EpisodeList/EpisodeList\"\r\n// eslint-disable-next-line\r\nimport vjsEpisodeButton from \"./EpisodeButton/EpisodeButton\"\r\n// eslint-disable-next-line\r\nimport vjsNextEpisode from \"./NextEpisode/NextEpisode\"\r\nimport VjsMsg from \"./VjsMsg/VjsMsg\"\r\n\r\nexport default class VideoPlayer extends Component {\r\n    state = {\r\n        s: 1,\r\n    }\r\n    create_allplaylist = () => {\r\n        let allplaylist = []\r\n        let { bundleSize, id, type } = this.props.videoInfo\r\n        let bundleKeys = Object.keys(bundleSize)\r\n        bundleKeys.forEach((key, index) => {\r\n            let list = []\r\n            for (let i = 0; i < bundleSize[key] * 1; i++) {\r\n                let item = {\r\n                    sources: [{\r\n                        src: `/video/getvideo?id=${id}&type=${type}&s=${index + 1}&e=${i + 1}`,\r\n                        type: 'video/mp4',\r\n                    }]\r\n                }\r\n                list.push(item)\r\n            }\r\n            allplaylist.push(list)\r\n        });\r\n        return allplaylist\r\n    }\r\n    startep = (_, data) => {\r\n        const { s } = this.state\r\n        if (data.s !== s) {\r\n            this.setState({ s: data.s })\r\n        }\r\n        if (this.player && this.player.playlist) {\r\n            if(data.e!==(this.player.playlist.currentItem()+1) || data.s!==s){\r\n                this.player.playlist.currentItem(data.e - 1)\r\n            }\r\n        }\r\n    }\r\n    nextep=()=>{\r\n        let s=this.state.s\r\n        let { bundleSize } = this.props.videoInfo\r\n        let maxe=bundleSize[Object.keys(bundleSize)[s-1]]\r\n        let e=this.player.playlist.currentItem() + 1\r\n        if(e<maxe){\r\n            let data={\r\n                s,\r\n                e:e+1,\r\n            }\r\n            this.startep(null,data)\r\n        }\r\n        \r\n    }\r\n    addSubs=(s,e)=>{\r\n        let { id, type } = this.props.videoInfo\r\n        this.currentsubs=this.player.addRemoteTextTrack({\r\n            src: `/video/getsubs?id=${id}&type=${type}&s=${s}&e=${e}`,\r\n            default:true,\r\n            label:\"中文\",\r\n            mode: 'showing',\r\n        },true)\r\n    }\r\n    togglePlay=(e)=>{\r\n        if(this.player.paused()){\r\n            this.player.play()\r\n        }else{\r\n            this.player.pause()\r\n        }\r\n    }\r\n    handlescroll=(event)=>{\r\n        if(this.player.isFullscreen()){\r\n            let operator=(event.nativeEvent.deltaY<0) ? 1 : -1\r\n            this.changevolume(operator)\r\n        }\r\n    }\r\n    changevolume=(operator)=>{\r\n        let newvolume=this.player.volume()+0.05*operator\r\n        if(newvolume>1){\r\n            newvolume=1\r\n        }else if(newvolume<0){\r\n            newvolume=0\r\n        }\r\n        this.player.volume(newvolume)\r\n        this.vjsMsgNode.vjsMsg(`音量${parseInt(newvolume*100)}%`)\r\n    }\r\n    hotkeypress=(event)=>{\r\n        const hotkey=event.keyCode\r\n        const {player}=this\r\n        if(hotkey===32){\r\n            //空格按下\r\n            if(player.paused()){\r\n                player.play()\r\n            }else{\r\n                player.pause()\r\n            }\r\n        }else if(hotkey===13){\r\n            //enter按下\r\n            if(player.isFullscreen()){\r\n                player.exitFullscreen()\r\n            }else{\r\n                player.requestFullscreen()\r\n            }\r\n        }else if(hotkey===37){\r\n            //向左\r\n            let newtime=player.currentTime()-5\r\n            newtime=newtime>0 ? newtime : 0\r\n            player.currentTime(newtime)\r\n        }else if(hotkey===39){\r\n            //向右\r\n            let newtime=player.currentTime()+15\r\n            newtime=newtime>0 ? newtime : 0\r\n            player.currentTime(newtime)\r\n        }else if(hotkey===38){\r\n            //向上\r\n            this.changevolume(1)\r\n        }else if(hotkey===40){\r\n            //向下\r\n            this.changevolume(-1)\r\n        }\r\n    }\r\n    componentDidMount() {\r\n        let that = this\r\n        // let { id, type } = this.props.videoInfo\r\n        this.allplaylist = this.create_allplaylist()\r\n        let { s } = this.state\r\n        const {addSubs , startep, nextep}=this\r\n        let videoJsOptions = {\r\n            autoplay: true,\r\n            controls: true,\r\n            fluid: true,\r\n            // height:\"720px\",\r\n            preLoad:true,\r\n        }\r\n        this.player = videojs(this.videoNode, videoJsOptions, function onPlayerReady() {\r\n            this.playlist(that.allplaylist[s - 1])\r\n            this.playlist.autoadvance(0);\r\n            // addSubs(1,1)\r\n            this.on(\"firstplay\", () => {\r\n                let e = this.playlist.currentItem() + 1\r\n                pubsub.publish(\"sete\", e)\r\n                pubsub.publish(\"sete_inline\", e)\r\n                addSubs(s,e)\r\n                //设置字幕样式\r\n                var settings = this.textTrackSettings;\r\n                settings.setValues({\r\n                    // \"backgroundColor\": \"rgb(66, 54, 54)\",\r\n                    \"backgroundOpacity\": \"0\",\r\n                    \"edgeStyle\": \"dropshadow\",\r\n                });\r\n                settings.updateDisplay();\r\n                //视频获得焦点以便于键盘控制\r\n                that.videoNode.focus()\r\n            })\r\n            pubsub.subscribe(\"startep\", startep)\r\n            this.getChild('controlBar').addChild(\"vjsEpisodeButton\", {\r\n                s,\r\n                startep,\r\n                bundleSize: that.props.videoInfo.bundleSize,\r\n            }, 10);\r\n            this.getChild('controlBar').addChild(\"vjsNextEpisode\", {nextep}, 1);\r\n        });\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        pubsub.unsubscribe(\"startep\")\r\n        if (this.player) {\r\n            this.player.dispose()\r\n        }\r\n        \r\n    }\r\n    render() {\r\n        if (this.player && this.player.playlist) {\r\n            this.player.playlist(this.allplaylist[this.state.s - 1])\r\n        }\r\n        return (\r\n            <div className=\"vjs-wraper\" onKeyDown={this.hotkeypress}>\r\n                <div data-vjs-player >\r\n                    <VjsMsg ref={node=>this.vjsMsgNode=node} />\r\n                    <video \r\n                    ref={node => this.videoNode = node} \r\n                    className=\"video-js\"\r\n                    onWheel= {this.handlescroll}\r\n                    ></video>\r\n                </div>\r\n            </div>\r\n\r\n        )\r\n    }\r\n}\r\n\r\n\r\n","import React, { Component } from 'react'\r\n// import { Swiper, SwiperSlide } from 'swiper/react';\r\n// import 'swiper/swiper.scss';\r\nimport pubsub from \"pubsub-js\"\r\nimport \"./ButtonSE.css\"\r\n\r\n\r\nexport default class ButtonSE extends Component {\r\n    state={\r\n        s_swift:1,\r\n        e:1,\r\n        s:1,\r\n    }\r\n    sete=(_,e)=>{\r\n        this.setState({e})\r\n    }\r\n    componentDidMount(){\r\n        pubsub.subscribe(\"sete\",this.sete)\r\n    }\r\n    componentWillUnmount(){\r\n        pubsub.unsubscribe(\"sete\")\r\n    }\r\n    create_s_e=()=>{\r\n        let { type, bundleSize } = this.props.videoInfo\r\n        const seasonCN=[\"第一季\",\"第二季\",\"第三季\",\"第四季\",\"第五季\",\"第六季\",\"第七季\",\"第八季\",\"第九季\",\"第十季\",\"第十一季\",\"第十二季\",\"第十三季\",\"第十四季\",\"第十五季\"]\r\n        const partCN=[\"第一部\",\"第二部\",\"第三部\",\"第四部\",\"第五部\",\"第六部\",\"第七部\",\"第八部\",\"第九部\",\"第十部\",\"第十一部\",\"第十二部\",\"第十三部\",\"第十四部\",\"第十五部\"]\r\n        let s_name=[]\r\n        let s_e=[]\r\n        let bundleKeys=Object.keys(bundleSize)\r\n        // console.log(bundleSize,bundleKeys);\r\n        if(bundleKeys.length===1){\r\n            let list=[]\r\n            if(bundleSize[bundleKeys[0]]>1){\r\n                for (let i=0;i<bundleSize[bundleKeys[0]]; i++){\r\n                    if(type===\"Movies\"){\r\n                        list.push(partCN[i])\r\n                    }else{\r\n                        list.push(i+1)\r\n                    }\r\n                }\r\n            }\r\n            s_e.push(list)\r\n        }else{\r\n            bundleKeys.forEach((key,index) => {\r\n                s_name.push(seasonCN[index])\r\n                let list=[]\r\n                for (let i=0;i<bundleSize[key]*1; i++){\r\n                    list.push(i+1)\r\n                }\r\n                s_e.push(list)\r\n            });\r\n        }\r\n        this.s_e=s_e\r\n        this.s_name=s_name\r\n    }\r\n    changeSeason=(index)=>{\r\n        this.setState({s_swift:index+1})\r\n    }\r\n    changeEpisode=(index1, index2)=>{\r\n        let s=index1+1\r\n        let e=index2+1\r\n        this.setState({s,e,})\r\n        pubsub.publish(\"startep\",{s,e})\r\n    }\r\n    createEpisode=(season,index1)=>{\r\n        const {s_swift, e, s}=this.state\r\n        return (\r\n\r\n            <div \r\n            key={index1} \r\n            className=\"episode_swiper\"\r\n            style={{\"display\":((s_swift===(index1+1)) ? \"flex\" : \"none\")}}\r\n            >\r\n                {\r\n                    season.map((ep,index2)=>(\r\n                        <span\r\n                        key={index2}\r\n                        className={((e===(index2+1)) && (s===(index1+1))) ? \"active_e_slide episode_slide\" : \"episode_slide\"}\r\n                        onClick={()=>{\r\n                            // console.log(index1+1,s);\r\n                            return this.changeEpisode(index1,index2)\r\n                        }}\r\n                        >{ep}</span>\r\n                    ))\r\n                }\r\n            </div>\r\n        )\r\n    }\r\n    render() {\r\n        this.create_s_e()\r\n        const {s_swift}=this.state\r\n        return (\r\n            <div>\r\n                <div style={{\"display\":(this.s_e.length>1 ? \"block\" : \"none\")}}>\r\n                    {this.s_name.map((name,index)=>(\r\n                        <button \r\n                        key={index}\r\n                        className={s_swift===(index+1) ? \"active_s_button season_button\" : \"season_button\"}\r\n                        onClick={()=>this.changeSeason(index)}\r\n                        >{name}</button>\r\n                    ))}\r\n                </div>\r\n                {this.s_e.map(this.createEpisode)}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","// export const createAndDownloadFile = function(fileName, content) {\r\n//     var aTag = document.createElement('a');\r\n//     // var blob = new Blob([content]);\r\n//     aTag.download = fileName;\r\n//     aTag.href = URL.createObjectURL(content);\r\n//     aTag.click();\r\n//     URL.revokeObjectURL(content);\r\n// };\r\nimport axios from \"axios\";\r\n\r\nexport const createAndDownloadFile = function(fileName, downUrl) {\r\n    axios({\r\n        method: 'get',\r\n        url: downUrl,\r\n        responseType: 'blob',\r\n        headers: { 'content-type': \"application/octet-stream\" }//'audio/mpeg' \r\n        // headers: {'content-length': '4066786', 'content-type': 'audio/mpeg'}\r\n    }).then((res) => {\r\n        // eslint-disable-next-line no-unused-vars\r\n        let blobType = 'application/force-download' // 设置blob请求头\r\n            // eslint-disable-next-line no-unused-vars\r\n        let blob = new Blob([res.data], { type: blobType }) // 创建blob 设置blob文件类型 data 设置为后端返回的文件(例如mp3,jpeg) type:这里设置后端返回的类型 为 mp3//res.data.type\r\n        let downa = document.createElement('a') // 创建A标签\r\n            // eslint-disable-next-line no-unused-vars\r\n        let href = window.URL.createObjectURL(blob) // 创建下载的链接\r\n        downa.href = href // 下载地址\r\n        downa.download = fileName // 下载文件名\r\n        document.body.appendChild(downa)\r\n        downa.click() // 模拟点击A标签\r\n        document.body.removeChild(downa) // 下载完成移除元素\r\n        window.URL.revokeObjectURL(href) // 释放blob对象\r\n    }).catch(function(error) {\r\n        console.log(error)\r\n    })\r\n}","import React, { Component } from 'react'\r\nimport { createAndDownloadFile } from \"../../utils/download\"\r\n\r\nimport \"./DownLoadList.css\"\r\n\r\nexport default class DownLoadList extends Component {\r\n    state = {\r\n        s_swift: 1,\r\n    }\r\n    changeSeason = (index) => {\r\n        this.setState({ s_swift: index + 1 })\r\n    }\r\n    create_s_e = () => {\r\n        let { type, bundleSize } = this.props.videoInfo\r\n        const seasonCN = [\"第一季\", \"第二季\", \"第三季\", \"第四季\", \"第五季\", \"第六季\", \"第七季\", \"第八季\", \"第九季\", \"第十季\", \"第十一季\", \"第十二季\", \"第十三季\", \"第十四季\", \"第十五季\"]\r\n        const partCN = [\"第一部\", \"第二部\", \"第三部\", \"第四部\", \"第五部\", \"第六部\", \"第七部\", \"第八部\", \"第九部\", \"第十部\", \"第十一部\", \"第十二部\", \"第十三部\", \"第十四部\", \"第十五部\"]\r\n        let s_name = []\r\n        let s_e = []\r\n        let bundleKeys = Object.keys(bundleSize)\r\n        if (bundleKeys.length === 1) {\r\n            let list = []\r\n            for (let i = 0; i < bundleSize[bundleKeys[0]]; i++) {\r\n                if (type === \"Movies\") {\r\n                    list.push(partCN[i])\r\n                } else {\r\n                    list.push(i + 1)\r\n                }\r\n            }\r\n            s_e.push(list)\r\n        } else {\r\n            bundleKeys.forEach((key, index) => {\r\n                s_name.push(seasonCN[index])\r\n                let list = []\r\n                for (let i = 0; i < bundleSize[key] * 1; i++) {\r\n                    list.push(i + 1)\r\n                }\r\n                s_e.push(list)\r\n            });\r\n        }\r\n        this.s_e = s_e\r\n        this.s_name = s_name\r\n    }\r\n    download = (s, e) => {\r\n        const { id, type, bundleName } = this.props.videoInfo\r\n        createAndDownloadFile(`${bundleName}_S${s}_E${ e<10 ? (\"0\"+e) : e }.mp4`, `/video/getvideo?id=${id}&s=${s}&e=${e}&type=${type}`)\r\n        // let cfm=window.confirm(`下载${bundleName}_S${s}_E${ e<10 ? (\"0\"+e) : e } ？`)\r\n        // if(cfm){\r\n        //     createAndDownloadFile(`${bundleName}_S${s}_E${ e<10 ? (\"0\"+e) : e }.mp4`, `/video/getvideo?id=${id}&s=${s}&e=${e}&type=${type}`)\r\n        // }\r\n    }\r\n\r\n    createEpisode = (season, index1) => {\r\n        const { bundleName } = this.props.videoInfo\r\n        const { s_swift } = this.state\r\n        return (\r\n\r\n            <ul\r\n                key={index1}\r\n                style={{ \"display\": ((s_swift === (index1 + 1)) ? \"block\" : \"none\") }}\r\n            >\r\n                {\r\n                    season.map((ep, index2) => (\r\n                        <li className=\"download_ep\" key={index2}>\r\n                            <span className=\"download_ep_name\"\r\n                            >{bundleName + \"_S\" + (index1 + 1) + \"_E\" + (index2 + 1)}</span>\r\n                            <span className=\"download_ep_button\" onClick={() => { this.download(index1 + 1, index2 + 1) }}>下载</span>\r\n                        </li>\r\n\r\n                    ))\r\n                }\r\n            </ul>\r\n        )\r\n    }\r\n    render() {\r\n        this.create_s_e()\r\n        const { s_swift } = this.state\r\n        return (\r\n            <div className=\"dowmload_warper\">\r\n                <h1 className=\"dowmload_header\">下载</h1>\r\n                <div className=\"download_s_wraper\" style={{ \"display\": (this.s_e.length > 1 ? \"block\" : \"none\") }}>\r\n                    {this.s_name.map((name, index) => (\r\n                        <button\r\n                            key={index}\r\n                            className={s_swift === (index + 1) ? \"download_active_s_button download_season_button\" : \"download_season_button\"}\r\n                            onClick={() => this.changeSeason(index)}\r\n                        >{name}</button>\r\n                    ))}\r\n                </div>\r\n                {this.s_e.map(this.createEpisode)}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from 'react'\r\nimport \"./PlayPage.css\"\r\nimport VideoPlayer from \"../../components/VideoPlayer/VideoPlayer\"\r\nimport ButtonSE from '../../components/ButtonSE/ButtonSE'\r\nimport DownLoadList from '../../components/DownLoadList/DownLoadList'\r\n\r\nexport default class PlayPage extends Component {\r\n\r\n    render() {\r\n        let videoInfo=this.props.location.state\r\n        return (\r\n            <div className=\"playpage\">\r\n                <h1 className=\"topVideoName\">{videoInfo.bundleName}</h1>\r\n                <VideoPlayer videoInfo={videoInfo} />\r\n                <ButtonSE videoInfo={videoInfo} />\r\n                <DownLoadList videoInfo={videoInfo} />\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from 'react'\r\nimport \"./CreateDir.css\"\r\n\r\nexport default class Create extends Component {\r\n    state={\r\n        name_duplication:false,\r\n    }\r\n    componentDidMount(){\r\n        this.inputNode.focus()\r\n    }\r\n    keyDown=(event)=>{\r\n        if(event.keyCode===13){\r\n            this.sure()\r\n        }\r\n    }\r\n    sure=()=>{\r\n        if(!this.name_duplication){\r\n            const name=this.inputNode.value.trim()\r\n            this.props.createNewDir(name)\r\n            this.cancel()\r\n        }\r\n    }\r\n    cancel=()=>{\r\n        this.props.cancelNewDir()\r\n    }\r\n    blur=()=>{\r\n        this.name_duplication=false\r\n        const name=this.inputNode.value.trim()\r\n        const index=this.props.currentList.findIndex(item => item.name===name);\r\n        if(index!==-1){//重名\r\n            this.name_duplication=true\r\n            this.setState({name_duplication:true})\r\n        }else{\r\n            this.setState({name_duplication:false})\r\n        }\r\n    }\r\n    render() {\r\n        return (\r\n            // <div className=\"createdir_mask\">\r\n            <div className=\"createdir\">\r\n                <div className=\"create_inputouter\">\r\n                    <input \r\n                    className=\"create_inputinner\" \r\n                    placeholder=\"请输入新文件夹名字\" \r\n                    type=\"text\" \r\n                    ref={node=>{this.inputNode=node}} \r\n                    onKeyDown={this.keyDown} \r\n                    onBlur={this.blur}\r\n                    />\r\n                    <span className=\"create_warn\" style={{display:this.state.name_duplication ? \"block\" : \"none\"}}>\r\n                        重名\r\n                    </span>\r\n                </div>\r\n                <button className=\"create_cancel\" onClick={this.cancel}>取消</button>\r\n                <button className=\"create_sure\" onClick={this.sure}>确定</button>\r\n            </div>\r\n            // </div>\r\n\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from 'react'\r\nimport axios from \"axios\"\r\nimport \"./Upload.css\"\r\nexport default class Upload extends Component {\r\n    state={\r\n        percent:0,\r\n        filename:\"点击选择要上传的文件\",\r\n    }\r\n    upload=()=>{\r\n        this.setState({percent:0})\r\n        const {dir}=this.props\r\n        let that=this\r\n        let formData=new FormData();\r\n        formData.append('type',\"file\")\r\n        // formData.append('isdir',false)\r\n        formData.append('dir',dir)\r\n        formData.append('FILE',this.fileNode.files[0])\r\n        axios({\r\n            url: '/createFile',\r\n            method: 'post',\r\n            headers: {\r\n                'Content-Type': 'multipart/form-data'\r\n            },\r\n            onUploadProgress: function (progressEvent) { //原生获取上传进度的事件\r\n                if (progressEvent.lengthComputable) {\r\n                    //属性lengthComputable主要表明总共需要完成的工作量和已经完成的工作是否可以被测量\r\n                    //如果lengthComputable为false，就获取不到progressEvent.total和progressEvent.loaded\r\n                    let percent = progressEvent.loaded / progressEvent.total * 100\r\n                    // console.log(percent);\r\n                    that.setState({percent:parseInt(percent)})\r\n\r\n                }\r\n            },\r\n            data: formData\r\n        })\r\n        .then(res => {\r\n            if(res.data===\"finished\"){\r\n                // that.uploaded=\"成功！\"\r\n                that.props.intoDir()\r\n            }\r\n        }).catch(error => {\r\n            console.log(error)\r\n        })\r\n    }\r\n    fakeClick=()=>{\r\n        this.fileNode.click()\r\n    }\r\n    fileChange=()=>{\r\n        if(this.fileNode.files.length>=1){\r\n            this.setState({filename:this.fileNode.files[0].name})\r\n        }else{\r\n            this.setState({filename:\"点击选择要上传的文件\"})\r\n        }\r\n    }\r\n    render() {\r\n        const {percent}=this.state\r\n        return (\r\n            <div className=\"upload\">\r\n                <div className=\"upload_outer\">\r\n                    <input className=\"upload_inner\" type=\"file\" ref={node=>{this.fileNode=node}} onChange={this.fileChange} />\r\n                    <span className=\"upload_filename ellipsis\"  onClick={this.fakeClick} >{this.state.filename}</span>\r\n                    <span className=\"upload_percent\">{percent>0 ? \"--\"+percent+\"%\" : \"\"}</span>\r\n                    <span className=\"upload_button\" onClick={this.upload} >上传</span>\r\n                </div>\r\n                <span className=\"cancelButton\" onClick={()=>{this.props.toggleUpload(false)}}>关闭</span>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from 'react'\r\nimport \"./MessageBox.css\"\r\n\r\nexport default class MessageBox extends Component {\r\n    render() {\r\n        const {msg} = this.props\r\n        return (\r\n            <div className=\"msgbox\">\r\n                <div className=\"msgbox_msg\">\r\n                    {msg}\r\n                </div>\r\n                \r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from 'react'\r\nimport axios from \"axios\"\r\nimport {createAndDownloadFile} from \"../../utils/download\"\r\nimport \"./Files.css\"\r\nimport CreateDir from \"./CreateDir/CreateDir\"\r\nimport Upload from \"../../components/Upload/Upload\"\r\nimport MessageBox from \"../../components/MessageBox/MessageBox\"\r\n\r\nexport default class File extends Component {\r\n    state={\r\n        currentList:[],\r\n        showCreateDir:false,\r\n        showUpload:false,\r\n        showMsg:false,\r\n    }\r\n    componentDidMount(){\r\n        document.documentElement.addEventListener(\"keydown\",this.handleKeyDown)\r\n        document.documentElement.addEventListener(\"keyup\",this.handleKeyUp)\r\n        document.documentElement.addEventListener(\"mousedown\",this.handleMouseDown)\r\n        this.ctrlDown=false\r\n        this.shiftDown=false\r\n        this.altDown=false\r\n        this.chosenList=[]\r\n        this.moveList=[]\r\n        this.dir=\"File0\"\r\n        this.dirName=\"根目录\"\r\n        this.stack=[this.dir]\r\n        this.stackName=[this.dirName]\r\n        this.intoDir()\r\n\r\n    }\r\n    componentWillUnmount(){\r\n        document.documentElement.removeEventListener(\"keydown\",this.handleKeyDown)\r\n        document.documentElement.removeEventListener(\"keyup\",this.handleKeyUp)\r\n        document.documentElement.removeEventListener(\"mousedown\",this.handleMouseDown)\r\n    }\r\n    intoDir=()=>{\r\n        axios.get(`/getfiles?dir=${this.dir}`).then(this.changeList)\r\n    }\r\n    changeList=res=>{\r\n        let currentList=[]\r\n        let currentDirs=[]\r\n        let currentFiles=[]\r\n        res.data.forEach(file=>{\r\n            file.chosen=false\r\n            if(file.type===\"dir\"){\r\n                currentDirs.push(file)\r\n            }else if(file.type===\"file\"){\r\n                currentFiles.push(file)\r\n            }\r\n        })\r\n        currentList=[...currentDirs, ...currentFiles]\r\n        this.setState({\r\n            currentList\r\n        })\r\n    }\r\n    handleKeyDown=(event)=>{\r\n        // event.stopPropagation()\r\n        switch (event.keyCode) {\r\n            case 17://ctrl\r\n                if(!this.ctrlDown){\r\n                    this.ctrlDown=true\r\n                }\r\n                break;\r\n            case 16://shift\r\n                if(!this.shiftDown){\r\n                    this.shiftDown=true\r\n                }\r\n                break;\r\n            case 65://a\r\n                event.preventDefault()\r\n                if(this.ctrlDown){\r\n                    let currentList=this.state.currentList.map(item=>{\r\n                        item.chosen=true\r\n                        return item\r\n                    })\r\n                    this.chosenList=currentList\r\n                    this.setState({currentList})\r\n                }\r\n                break\r\n            case 88://x\r\n                if(this.ctrlDown && this.chosenList.length>0){\r\n                    this.moveList=this.chosenList\r\n                    this.fromdir=this.dir\r\n                }\r\n                break\r\n            case 86://v\r\n                if(this.ctrlDown && this.moveList.length>0){\r\n                    const {moveList, fromdir, dir}=this\r\n                    const ids=moveList.map(item=>item._id)\r\n                    let data={ids,dir:fromdir,newdir:dir}\r\n                    this.moveList=[]\r\n                    axios.post(\"/movefile\",data).then(res=>{\r\n                        if(res.data===\"success\"){\r\n                            this.intoDir()\r\n                        }\r\n                    })\r\n                }\r\n                break\r\n            case 67://c\r\n                if(this.ctrlDown){\r\n                    this.showMessage()\r\n                }\r\n                break\r\n            case 18://alt\r\n                if(!this.altDown){\r\n                    this.altDown=true\r\n                }\r\n                break\r\n            case 46://delete\r\n                const {chosenList, dir}=this\r\n                if(chosenList.length>0){\r\n                    const ids=chosenList.map(item=>item._id)\r\n                    let data={ids,dir}\r\n                    // console.log(data);\r\n                    this.chosenList=[]\r\n                    axios.post(\"/deletefile\",data).then(res=>{\r\n                        if(res.data===\"success\"){\r\n                            this.intoDir()\r\n                        }\r\n                    })\r\n                }\r\n                \r\n                break\r\n            case 38://up\r\n                if(this.altDown){\r\n                    this.gotoPrevDir()\r\n                }else{\r\n                    if(this.chosenList.length===0){\r\n                        //暂时不添加更多方向按键选择功能\r\n                    }\r\n                }\r\n                break\r\n            case 40://down\r\n                break\r\n            case 37://left\r\n                break\r\n            case 39://right\r\n                break\r\n            default:\r\n                break;\r\n        }\r\n\r\n        console.log(event.keyCode);\r\n    }\r\n    handleKeyUp=(event)=>{\r\n        event.stopPropagation()\r\n        event.preventDefault()\r\n        switch (event.keyCode) {\r\n            case 17:\r\n                this.ctrlDown=false\r\n                break;\r\n            case 16:\r\n                this.shiftDown=false\r\n                break\r\n            case 18:\r\n                this.altDown=false\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n    handleMouseDown=(event)=>{\r\n        if(this.shiftDown){\r\n            event.stopPropagation()\r\n            event.preventDefault()\r\n        }\r\n    }\r\n    handleWarperClick=(event)=>{\r\n        event.stopPropagation()\r\n        this.unselectChosen()\r\n    }\r\n    unselectChosen=()=>{\r\n        this.chosenList=[]\r\n        let currentList=this.state.currentList.map(item=>{\r\n            item.chosen=false\r\n            return item\r\n        })\r\n        this.setState({currentList})\r\n    }\r\n    handleItemkeyDown=(current,event)=>{\r\n        if(event.keyCode===13){//enter\r\n            // console.log(this.chosenList);\r\n            this.handleItemDbclick(current)\r\n        }\r\n    }\r\n    handleItemDbclick=(current)=>{\r\n        if(current.type===\"dir\"){\r\n            this.dir=current.modelName\r\n            this.dirName=current.name\r\n            this.stack.push(this.dir)\r\n            this.stackName.push(this.dirName)\r\n            this.intoDir()\r\n        }\r\n\r\n    }\r\n    gotoPrevDir=()=>{\r\n        let len=this.stack.length\r\n        if(len>1){\r\n            this.dir=this.stack[len-2]\r\n            this.dirName=this.stackName[len-2]\r\n            this.stack.pop()\r\n            this.stackName.pop()\r\n            this.intoDir()\r\n        }\r\n    }\r\n\r\n    handleItemClik=(current, event)=>{\r\n        event.stopPropagation()\r\n        event.preventDefault()\r\n        const toggleItem=item=>{\r\n            if(this.ctrlDown===false){\r\n                item.chosen=false\r\n            }\r\n            if(item._id===current._id){\r\n                item.chosen=!item.chosen\r\n                //判断item是否在chosenList中，如果在删除，不在添加\r\n                let index=this.chosenList.findIndex(chosen=>{\r\n                    if(chosen._id===item._id){\r\n                        return true\r\n                    }else{\r\n                        return false\r\n                    }\r\n                })\r\n                if(index>=0){\r\n                    this.chosenList.splice(index,1)\r\n                }else{\r\n                    this.chosenList.push(item)\r\n                }\r\n            }\r\n            return item\r\n        }\r\n        if(this.ctrlDown){\r\n            let currentList=this.state.currentList\r\n            currentList.map(toggleItem)\r\n            this.setState({currentList})\r\n        }else if(this.shiftDown && this.chosenList.length>0){\r\n            let currentList=this.state.currentList\r\n            let firstIndex=currentList.findIndex(item=>item._id===this.chosenList[this.chosenList.length-1]._id)\r\n            let lastIndex=currentList.findIndex(item=>item._id===current._id)\r\n            if(firstIndex>lastIndex){\r\n                let tempIndex=lastIndex\r\n                lastIndex=firstIndex\r\n                firstIndex=tempIndex\r\n            }\r\n            let newcurrentList=this.state.currentList.map((item,index)=>{\r\n                if(index>=firstIndex && index<=lastIndex){\r\n                    item.chosen=true\r\n                }else{\r\n                    item.chosen=false\r\n                }\r\n                return item\r\n            })\r\n            this.setState({currentList:newcurrentList})\r\n            this.chosenList=newcurrentList.slice(firstIndex,lastIndex+1)\r\n        }else if(this.ctrlDown===false){\r\n            this.chosenList=[]\r\n            let currentList=this.state.currentList.map(toggleItem)\r\n            this.setState({currentList})\r\n        }\r\n\r\n\r\n    }\r\n    fileDownLoad=(current,event)=>{\r\n        event.stopPropagation()\r\n        event.preventDefault()\r\n        createAndDownloadFile(current.name,`/downloadfile?id=${current._id}&dir=${current.dir}`)\r\n    }\r\n    createNewDir=(name)=>{\r\n        if(name===\"\") return\r\n        axios.get(`/createdir?name=${name}&dir=${this.dir}`).then(res=>{\r\n            if(res.data===\"success\"){\r\n                this.intoDir()\r\n            }\r\n        })\r\n    }\r\n    showNewDir=()=>{\r\n        this.setState({showCreateDir:true})\r\n    }\r\n    cancelNewDir=()=>{\r\n        this.setState({showCreateDir:false})\r\n    }\r\n    toggleUpload=(showUpload)=>{\r\n        this.setState({showUpload})\r\n    }\r\n    showMessage=()=>{\r\n        this.setState({showMsg:true})\r\n        let timer=setTimeout(()=>{\r\n            this.setState({showMsg:false})\r\n            clearTimeout(timer)\r\n        },1000)\r\n    }\r\n    gotoDir=(index)=>{\r\n        this.dir=this.stack[index]\r\n        this.dirName=this.stackName[index]\r\n        this.stack=this.stack.slice(0,index+1)\r\n        this.stackName=this.stackName.slice(0,index+1)\r\n        this.intoDir()\r\n    }\r\n    render() {\r\n        const { currentList }=this.state\r\n        return (\r\n            <div className=\"fileWarper\" onClick={this.handleWarperClick} >\r\n                {\r\n                    this.state.showCreateDir ? <CreateDir createNewDir={this.createNewDir} cancelNewDir={this.cancelNewDir} currentList={this.state.currentList} /> : \"\"\r\n                }\r\n                {\r\n                    this.state.showUpload ? <Upload dir={this.dir} toggleUpload={this.toggleUpload} intoDir={this.intoDir} /> : \"\"\r\n                }\r\n                {\r\n                    this.state.showMsg ? <MessageBox msg=\"没有复制功能\" /> : \"\"\r\n                }\r\n                <h1 className=\"dirs\">\r\n                    {\r\n                        this.stackName ?\r\n                        this.stackName.map((dirName,index)=>{\r\n                            return(\r\n                                <span  key={index}>\r\n                                    <span className=\"tagName filetag_left\" onClick={()=>{this.gotoDir(index)}} >{dirName}</span>\r\n                                    <span className=\"filetag_left\">&gt;</span>\r\n                                </span>\r\n                            )\r\n                        }):\r\n                        \"\"\r\n                    }\r\n                    <span className=\"tagName filetag_right\" onClick={this.gotoPrevDir}>上一级</span>\r\n                    <span className=\"tagName filetag_right\" onClick={this.showNewDir} >新建</span>\r\n                    <span className=\"tagName filetag_right\" onClick={()=>{this.toggleUpload(true)}} >上传</span>\r\n                </h1>\r\n                <ul>\r\n                {\r\n                    currentList.map((current)=>{\r\n                        return (\r\n                            <li \r\n                            className={ current.chosen ? \"file_li file_li_active\" : \"file_li\"} \r\n                            key={current._id} \r\n                            onClick={(event)=>{this.handleItemClik(current,event)}}\r\n                            onDoubleClick={()=>{this.handleItemDbclick(current)}}\r\n                            tabIndex=\"-1\"\r\n                            onKeyDown={(event)=>{this.handleItemkeyDown(current,event)}}\r\n                            >\r\n                                <span className={ current.type===\"dir\" ? \"dirImg\" : \"fileImg\" }></span>\r\n                                <span className=\"fileName ellipsis\">\r\n                                    {current.name}\r\n                                </span>\r\n                                {\r\n                                    <span \r\n                                    className=\"fileDownLoad\" \r\n                                    style={{display:current.type===\"file\" ? \"block\" : \"none\"}}\r\n                                    onClick={(event)=>{this.fileDownLoad(current,event)}}\r\n                                    >下载</span>\r\n                                }\r\n                            </li>\r\n                        )\r\n                    })\r\n                    \r\n                }\r\n                </ul>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from 'react'\r\nimport axios from \"axios\"\r\n\r\nexport default class Recycle extends Component {\r\n    state={\r\n        currentList:[],\r\n    }\r\n    componentDidMount(){\r\n        document.documentElement.addEventListener(\"keydown\",this.handleKeyDown)\r\n        document.documentElement.addEventListener(\"keyup\",this.handleKeyUp)\r\n        document.documentElement.addEventListener(\"mousedown\",this.handleMouseDown)\r\n        this.ctrlDown=false\r\n        this.shiftDown=false\r\n        this.chosenList=[]\r\n        this.readyList=[]\r\n        this.dir=\"RecycleBin\"\r\n        this.intoDir()\r\n\r\n    }\r\n    componentWillUnmount(){\r\n        document.documentElement.removeEventListener(\"keydown\",this.handleKeyDown)\r\n        document.documentElement.removeEventListener(\"keyup\",this.handleKeyUp)\r\n        document.documentElement.removeEventListener(\"mousedown\",this.handleMouseDown)\r\n    }\r\n    intoDir=()=>{\r\n        axios.get(`/getfiles?dir=${this.dir}`).then(this.changeList)\r\n    }\r\n    changeList=res=>{\r\n        let currentList=[]\r\n        let currentDirs=[]\r\n        let currentFiles=[]\r\n        res.data.forEach(file=>{\r\n            file.chosen=false\r\n            if(file.type===\"dir\"){\r\n                currentDirs.push(file)\r\n            }else if(file.type===\"file\"){\r\n                currentFiles.push(file)\r\n            }\r\n        })\r\n        currentList=[...currentDirs, ...currentFiles]\r\n        this.setState({\r\n            currentList\r\n        })\r\n    }\r\n    handleKeyDown=(event)=>{\r\n        event.stopPropagation()\r\n        event.preventDefault()\r\n        switch (event.keyCode) {\r\n            case 17://ctrl\r\n                if(!this.ctrlDown){\r\n                    this.ctrlDown=true\r\n                }\r\n                break;\r\n            case 16://shift\r\n                if(!this.shiftDown){\r\n                    this.shiftDown=true\r\n                }\r\n                break;\r\n            case 65://a\r\n                if(this.ctrlDown){\r\n                    let currentList=this.state.currentList.map(item=>{\r\n                        item.chosen=true\r\n                        return item\r\n                    })\r\n                    this.chosenList=currentList\r\n                    this.setState({currentList})\r\n                }\r\n                break\r\n            default:\r\n                break;\r\n        }\r\n\r\n        // console.log(event.keyCode);\r\n    }\r\n    handleKeyUp=(event)=>{\r\n        event.stopPropagation()\r\n        event.preventDefault()\r\n        switch (event.keyCode) {\r\n            case 17:\r\n                this.ctrlDown=false\r\n                break;\r\n            case 16:\r\n                this.shiftDown=false\r\n                break\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n    handleMouseDown=(event)=>{\r\n        if(this.shiftDown){\r\n            event.stopPropagation()\r\n            event.preventDefault()\r\n        }\r\n    }\r\n    handleWarperClick=(event)=>{\r\n        event.stopPropagation()\r\n        this.unselectChosen()\r\n    }\r\n    unselectChosen=()=>{\r\n        if(this.chosenList.length===0) return\r\n        this.chosenList=[]\r\n        let currentList=this.state.currentList.map(item=>{\r\n            item.chosen=false\r\n            return item\r\n        })\r\n        this.setState({currentList})\r\n    }\r\n    recoverChosen=()=>{\r\n        const {chosenList}=this\r\n        if(chosenList.length===0) return\r\n        const ids=chosenList.map(item=>item._id)\r\n        let data={ids}\r\n        this.chosenList=[]\r\n        axios.post(\"/recoverfile\",data).then(res=>{\r\n            if(res.data===\"success\"){\r\n                this.intoDir()\r\n            }\r\n        })\r\n    }\r\n    recoverOne=(current,event)=>{\r\n        event.preventDefault()\r\n        event.stopPropagation()\r\n        const ids=[current._id]\r\n        let data={ids}\r\n        axios.post(\"/recoverfile\",data).then(res=>{\r\n            if(res.data===\"success\"){\r\n                this.intoDir()\r\n            }\r\n        })\r\n    }\r\n    recoverAll=()=>{\r\n        if(this.state.currentList.length===0) return\r\n        const ids=this.state.currentList.map(item=>item._id)\r\n        let data={ids}\r\n        axios.post(\"/recoverfile\",data).then(res=>{\r\n            if(res.data===\"success\"){\r\n                this.intoDir()\r\n            }\r\n        })\r\n    }\r\n    clearChosen=()=>{\r\n        const {chosenList}=this\r\n        if(chosenList.length===0) return\r\n        const ids=chosenList.map(item=>item._id)\r\n        let data={ids}\r\n        this.chosenList=[]\r\n        axios.post(\"/clearfile\",data).then(res=>{\r\n            if(res.data===\"success\"){\r\n                this.intoDir()\r\n            }\r\n        })\r\n    }\r\n    clearAll=()=>{\r\n        axios.get(\"/clearall\").then(res=>{\r\n            if(res.data===\"success\"){\r\n                this.intoDir()\r\n            }\r\n        })\r\n    }\r\n    handleItemClik=(current, event)=>{\r\n        event.stopPropagation()\r\n        event.preventDefault()\r\n        const toggleItem=item=>{\r\n            if(this.ctrlDown===false){\r\n                item.chosen=false\r\n            }\r\n            if(item._id===current._id){\r\n                item.chosen=!item.chosen\r\n                //判断item是否在chosenList中，如果在删除，不在添加\r\n                let index=this.chosenList.findIndex(chosen=>{\r\n                    if(chosen._id===item._id){\r\n                        return true\r\n                    }else{\r\n                        return false\r\n                    }\r\n                })\r\n                if(index>=0){\r\n                    this.chosenList.splice(index,1)\r\n                }else{\r\n                    this.chosenList.push(item)\r\n                }\r\n            }\r\n            return item\r\n        }\r\n        if(this.ctrlDown){\r\n            let currentList=this.state.currentList\r\n            currentList.map(toggleItem)\r\n            this.setState({currentList})\r\n        }else if(this.shiftDown && this.chosenList.length>0){\r\n            let currentList=this.state.currentList\r\n            let firstIndex=currentList.findIndex(item=>item._id===this.chosenList[this.chosenList.length-1]._id)\r\n            let lastIndex=currentList.findIndex(item=>item._id===current._id)\r\n            if(firstIndex>lastIndex){\r\n                let tempIndex=lastIndex\r\n                lastIndex=firstIndex\r\n                firstIndex=tempIndex\r\n            }\r\n            let newcurrentList=this.state.currentList.map((item,index)=>{\r\n                if(index>=firstIndex && index<=lastIndex){\r\n                    item.chosen=true\r\n                }else{\r\n                    item.chosen=false\r\n                }\r\n                return item\r\n            })\r\n            this.setState({currentList:newcurrentList})\r\n            this.chosenList=newcurrentList.slice(firstIndex,lastIndex+1)\r\n        }else if(this.ctrlDown===false){\r\n            this.chosenList=[]\r\n            let currentList=this.state.currentList.map(toggleItem)\r\n            this.setState({currentList})\r\n        }\r\n\r\n\r\n    }\r\n    render() {\r\n        const { currentList }=this.state\r\n        return (\r\n            <div className=\"fileWarper\" onClick={this.handleWarperClick} >\r\n                <h1 className=\"dirs\">\r\n                    <span className=\"tagName filetag_left\" >回收站</span>\r\n                    <span className=\"filetag_left\">&gt;</span>\r\n                    <span className=\"tagName filetag_right\" onClick={this.clearAll}>全部清空</span>\r\n                    <span className=\"tagName filetag_right\" onClick={this.clearChosen}>清除选中</span>\r\n                    <span className=\"tagName filetag_right\" onClick={this.recoverAll}>全部恢复</span>\r\n                    <span className=\"tagName filetag_right\" onClick={this.recoverChosen}>恢复选中</span>\r\n                </h1>\r\n                <ul>\r\n                {\r\n                    currentList.map((current)=>{\r\n                        return (\r\n                            <li \r\n                            className={ current.chosen ? \"file_li file_li_active\" : \"file_li\"} \r\n                            key={current._id} \r\n                            onClick={(event)=>{this.handleItemClik(current,event)}}\r\n                            tabIndex=\"-1\"\r\n                            >\r\n                                <span className={ current.type===\"dir\" ? \"dirImg\" : \"fileImg\" }></span>\r\n                                <span className=\"fileName\">\r\n                                    {current.name}\r\n                                </span>\r\n                                {\r\n                                    <span \r\n                                    className=\"fileDownLoad\" \r\n                                    style={{display:current.type===\"file\" ? \"block\" : \"none\"}}\r\n                                    onClick={(event)=>{this.recoverOne(current,event)}}\r\n                                    >还原</span>\r\n                                }\r\n                            </li>\r\n                        )\r\n                    })\r\n                    \r\n                }\r\n                </ul>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from 'react'\r\nimport {Route, NavLink, Redirect, withRouter} from \"react-router-dom\"\r\n// import CacheRoute, { CacheSwitch } from 'react-router-cache-route'\r\nimport \"./App.css\"\r\nimport SearchList from './paths/SearchList/SearchList'\r\nimport SearchButton from './components/SearchButton/SearchButton'\r\nimport Movie from './paths/Movie/Movie'\r\nimport Tv from \"./paths/Tv/Tv\"\r\nimport Animation from \"./paths/Animation/Animation\"\r\nimport PlayPage from './paths/PlayPage/PlayPage'\r\nimport File from \"./paths/File/File\"\r\n// import Upload from './components/Upload/Upload'\r\nimport Recycle from \"./paths/Recycle/Recycle\"\r\n\r\nclass app extends Component {\r\n    render() {\r\n        return (\r\n            <div className=\"app\">\r\n                <div className=\"appWraper\">\r\n                    <div className=\"appHeader\">\r\n                        <div className=\"applogo\">\r\n                            <span>闲</span>\r\n                        </div>\r\n                        <SearchButton />\r\n                    </div>\r\n                    <div className=\"appBody\">\r\n                        <div className=\"nav\">\r\n                            <NavLink className=\"link\" activeClassName=\"linkActive\" to=\"/movie\" >电影</NavLink>\r\n                            <NavLink className=\"link\" activeClassName=\"linkActive\" to=\"/animation\" >动漫</NavLink>\r\n                            <NavLink className=\"link\" activeClassName=\"linkActive\" to=\"/tv\" >电视剧</NavLink>\r\n                            <NavLink className=\"link\" activeClassName=\"linkActive\" to=\"/file\">文件</NavLink>\r\n                            <NavLink className=\"link\" activeClassName=\"linkActive\" to=\"/recycle\">回收站</NavLink>\r\n                        </div>\r\n                        <div  className=\"routesContent\">\r\n                            <Route path=\"/movie\" component={Movie} />\r\n                            <Route path=\"/animation\" component={Animation} />\r\n                            <Route path=\"/tv\" component={Tv} />\r\n                            <Route path=\"/search\" component={SearchList} />\r\n                            <Route path=\"/playpage\" component={PlayPage} />\r\n                            <Route path=\"/file\" component={File} />\r\n                            <Route path=\"/recycle\" component={Recycle} />\r\n                            <Redirect to=\"/movie\" />\r\n                        </div>\r\n                        \r\n                    </div>\r\n                    \r\n                </div>\r\n                \r\n            </div>\r\n        )\r\n\r\n    }\r\n}\r\n\r\nexport default withRouter(app)","import React from \"react\"\r\nimport ReactDOM from \"react-dom\"\r\nimport { BrowserRouter } from \"react-router-dom\"\r\n\r\nimport App from \"./App\"\r\n\r\nReactDOM.render(<BrowserRouter><App /></BrowserRouter>, document.getElementById(\"root\"))\r\n","// exports.movieTags = [\"Action\", \"Fiction\", \"Love\", \"Fantasy\", \"Comedy\", \"Horror\", \"Adventure\",\"Disaster\",\"Realistic\", \"Samurai\", \"West\"]\r\n// exports.animationTags=[\"Fiction\",\"Robot\",\"Theatrical\",\"Harem\",\"Funny\",\"WarmBlood\",\"Daily\",\"Battle\",\"Reasoning\",\"Cure\",\"CauseDepression\",\"Campus\",\"Original\",\"Adaptation\"]\r\n// exports.tvTags=[\"Chinese\",\"US_EU\",\"Korean\"]\r\nlet movieTagsCN={ \r\n    Action: \"动作\", \r\n    Fiction:\"科幻\",\r\n    Love:\"爱情\",\r\n    Fantasy: \"奇幻\",\r\n    Comedy: \"喜剧\",\r\n    Horror: \"恐怖\",\r\n    Adventure: \"冒险\", \r\n    Disaster:\"灾难\",\r\n    Realistic:\"现实\", \r\n    Samurai:\"武士\", \r\n    West:\"西部\"\r\n}\r\n\r\nlet animationTagsCN={\r\n    \"Fiction\":\"科幻\",\r\n    \"Robot\":\"机战\",\r\n    \"Theatrical\":\"剧场\",\r\n    \"Harem\":\"后宫\",\r\n    \"Funny\":\"搞笑\",\r\n    \"WarmBlood\":\"热血\",\r\n    \"Daily\":\"日常\",\r\n    \"Battle\":\"战斗\",\r\n    \"Reasoning\":\"推理\",\r\n    \"Cure\":\"治愈\",\r\n    \"CauseDepression\":\"致郁\",\r\n    \"Campus\":\"校园\",\r\n    // \"Workplace\":\"职场\",,\"Workplace\"\r\n    // \"Music\":\"音乐\",\r\n    // \"DeliciousFood\":\"美食\",\"Music\",\"DeliciousFood\",\r\n    \"Original\":\"原创\",\r\n    \"Adaptation\":\"改编\", \r\n}\r\n\r\nlet tvTagsCN={\r\n    \"Chinese\":\"国产\",\r\n    \"US_EU\":\"欧美\",\r\n    \"Korean\":\"日韩\",\r\n}\r\n\r\nexports.movieTagsCN=movieTagsCN\r\nexports.movieTags=Object.keys(movieTagsCN)\r\nexports.animationTagsCN=animationTagsCN\r\nexports.animationTags=Object.keys(animationTagsCN)\r\nexports.tvTagsCN=tvTagsCN\r\nexports.tvTags=Object.keys(tvTagsCN)"],"sourceRoot":""}